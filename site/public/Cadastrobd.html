<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="css/style.css">
    <title>Cadastro</title>
    <script src="https://unpkg.com/sweetalert/dist/sweetalert.min.js"></script>
    <!--¬†Sweet¬†alert¬†-->
</head>

<body class="bodylogin_cadastro">
    <nav id="menu" class="menu">
        <ul class="item2">
            <li>
                <h1><a href="loginbanco.html" style="color:  rgb(0, 0, 0);">Tutorial</a>
                    <hr>
                </h1>
            </li>
        </ul>
        <ul class="item3roda">
            <li>
                <h1><a href="quem_sou.html" style="color:  rgb(0, 0, 0);">Sobre mim</a>
                    <hr>
                </h1>
            </li>
        </ul>
        <ul class="item4">
            <li>
                <h1><a href="loginbanco.html" style="color: rgb(0, 0, 0);">Login</a>
                    <hr>
                </h1>
            </li>
        </ul>
        <ul class="item4">
            <li>
                <h1><a href="Grafico.html" style="color: rgb(0, 0, 0);">Graficos</a>
                    <hr>
                </h1>
            </li>
        </ul>
    </nav>


    <div class="blococadastro">
        <h3 style="color: aliceblue;">Cadastre-se e fique por dentro do mundo do cultivo </h3><br><br>
        <h1>Cadastro</h1><br><br>
        <input style="font-size: large;" id="input_nome" type="text" placeholder="Nome"><br><br>
        <input style="font-size: large;" id="input_email" type="text" placeholder="Email"><br><br>
        <input style="font-size: large;" id="input_senha" type="password" placeholder="Senha"><br><br>

        <select style="font-size: large; " id="plantabd" class="plantabd">
            <option>Qual sua planta favorita?</option>
            <option value="1">Cacto</option>
            <option value="2">Costela de adao</option>
            <option value="3">Suculenta</option>
            <option value="4">Anturio</option>
            <option value="5">Jiboia</option>
            <option value="6">Zamioculca</option>
            <option value="7">Aspargo pluma</option>
            <option value="8">Aglaonema</option>
            <option value="9">Croton</option>
            <option value="10">Palmeira areca</option>
            <option value="11">Pau dagua</option>
            <option value="12">Orquidea</option>
            <option value="13">Lirio da paz</option>
            <option value="14">Bromelia</option>
            <option value="15">Bambu da sorte</option>
            <option value="16">Peperomia</option>

        </select>
        <button onclick="cadastrar()" class="botao_cadastro"
            style="color: black;font-weight: bold;margin-top: 5%;">Cadastrar</button>

    </div>
    </div>

    <div class="blococadastro2">
        <h1 style="color: aliceblue;">Fa√ßa o cadastro e come√ße sua experiencia com nossa fun√ß√µes </h1><br><br>
        <h1>Tenha acesso ao nosso tutorial<br><br>simule a planta que se encaixa ao seu ambiente<br><br>Saiba
            curiosidades sobre a sua planta </h1><br><br>

</body>

</html>

<script>
    function cadastrar() {
        //aguardar();

        //Recupere o valor da nova input pelo nome do id
        // Agora v√° para o m√©todo fetch logo abaixo
        var nomeVar = input_nome.value;
        var emailVar = input_email.value;
        var senhaVar = input_senha.value;
        var planta_favoritaVar = plantabd.value;


        if (nomeVar == "" || emailVar == "" || senhaVar == "" || planta_favoritaVar == "") {
            //cardErro.style.display = "block"
            swal("Ops", "Preencha todos os campos üò†", "error")


            //finalizarAguardar();
            return false;
        }
        else if (nomeVar.length < 2) {
            swal("Ops", "O nome inserido √© muito curto. Por favor, insira um nome com pelo menos 8 caracteres üò†", "warning")
        }
        else if ( emailVar.indexOf("@") == -1 || emailVar.indexOf(".com") == -1 || emailVar.length < 5) {
            swal("Ops", "O e-mail cadastrado √© inv√°lido. Por favor, insira um e-mail v√°lido üò†", "warning")
        }
        else if (senhaVar.length < 2) {
            swal("Ops", "A senha inserida √© muito curta. Por favor,insira uma senha com pelo menos 8 caracteres üò†", "warning")
        }
        else {
            // Enviando o valor da nova input
            fetch("/usuarios/cadastrar", {
                method: "POST",
                headers: {
                    "Content-Type": "application/json"
                },
                body: JSON.stringify({
                    // crie um atributo que recebe o valor recuperado aqui
                    // Agora v√° para o arquivo routes/usuario.js
                    nomeServer: nomeVar,
                    emailServer: emailVar,
                    senhaServer: senhaVar,
                    plantaServer: planta_favoritaVar
                })
            }).then(function (resposta) {

                console.log("resposta: ", resposta);

                if (resposta.ok) {
                    //cardErro.style.display = "block";
                    swal("Par√°bens", "Cadastro realizado com sucesso redirecionando a tela de login üòÑ...!", "success");


                    setTimeout(() => {
                        window.location = "./loginbanco.html";
                    }, 3000)

                    //limparFormulario();
                    //finalizarAguardar();
                } else {
                    swal("Ops", "Mais de um usu√°rio com o mesmo login e senha üò≠!")
                }
            }).catch(function (resposta) {
                console.log(`#ERRO: ${resposta}`);
                //finalizarAguardar();
            });

            return false;
        }
    }

       

</script>
















</script>
<script type="text/javascript">var $zoho=$zoho || {};$zoho.salesiq = $zoho.salesiq || {widgetcode:"7083315397a395eac5a65a01ee365d9aeb080b19ec31c7ce15b438cfd02fbcb609a0a29f616629fff06e1202645e8880", values:{},ready:function(){}};var d=document;s=d.createElement("script");s.type="text/javascript";s.id="zsiqscript";s.defer=true;s.src="https://salesiq.zoho.com/widget";t=d.getElementsByTagName("script")[0];t.parentNode.insertBefore(s,t);d.write("<div id='zsiqwidget'></div>");</script>