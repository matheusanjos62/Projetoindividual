<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="css/style.css">
    <title>Cadastro</title>
    <script src="https://unpkg.com/sweetalert/dist/sweetalert.min.js"></script>
    <!--Â SweetÂ alertÂ -->
</head>

<body class="bodylogin_cadastro">
    <nav id="menu" class="menu">
        <ul class="item2">
            <li>
                <h1><a href="Cadastrobd.html" style="color:  rgb(0, 0, 0);">Tutorial</a>
                    <hr>
                </h1>
            </li>
        </ul>
        <ul class="item3roda">
            <li>
                <h1><a href="quem_sou.html" style="color:  rgb(0, 0, 0);">Sobre mim</a>
                    <hr>
                </h1>
            </li>
        </ul>

        <ul class="item3roda">
            <li>
                <h1><a href="loginbanco.html" style="color:  rgb(0, 0, 0);">Curiosidades</a>
                    <hr>
                </h1>
            </li>
        </ul>


        <ul class="item4">
            <li>
                <h1><a href="loginbanco.html" style="color: rgb(0, 0, 0);">Login</a>
                    <hr>
                </h1>
            </li>
        </ul>

        <ul class="item5">
            <li>
                <h1><a href="quem_sou.html" style="color:rgb(0, 0, 0)">Quem sou</a>
                    <hr>
                </h1>
            </li>
        </ul>
    </nav>


    <div class="blococadastro">
        <h3 style="color: aliceblue;">Cadastre-se e fique por dentro do mundo do cultivo </h3><br><br>
        <h1>Cadastro</h1><br><br>
        <input style="font-size: large;" id="input_nome" type="text" placeholder="Nome"><br><br>
        <input style="font-size: large;" id="input_email" type="text" placeholder="Email"><br><br>
        <input style="font-size: large;" id="input_senha" type="password" placeholder="Senha"><br><br>

        <select style="font-size: large;" id="plantabd" class="plantabd">

            <option value="1">Cacto</option>
            <option value="2">Costela de adao</option>
            <option value="3">Suculenta</option>
            <option value="4">Anturio</option>
            <option value="5">Jiboia</option>
            <option value="6">Zamioculca</option>
            <option value="7">Aspargo pluma</option>
            <option value="8">Aglaonema</option>
            <option value="9">Croton</option>
            <option value="10">Palmeira areca</option>
            <option value="11">Pau dagua</option>
            <option value="12">Orquidea</option>
            <option value="13">Lirio da paz</option>
            <option value="14">Bromelia</option>
            <option value="15">Bambu da sorte</option>
            <option value="16">Peperomia</option>

        </select>
        <button onclick="cadastrar()" class="botao_cadastro"
            style="color: black;font-weight: bold;margin-top: 5%;">Cadastrar</button>

    </div>
    </div>

    <div class="blococadastro2">
        <h1 style="color: aliceblue;">FaÃ§a o cadastro e comeÃ§e sua experiencia com nossa funÃ§Ãµes </h1><br><br>
        <h1>Tenha acesso ao nosso tutorial<br><br>simule a planta que se encaixa ao seu ambiente<br><br>Saiba
            curiosidades sobre a sua planta </h1><br><br>

</body>

</html>

<script>
    function cadastrar() {
        //aguardar();

        //Recupere o valor da nova input pelo nome do id
        // Agora vÃ¡ para o mÃ©todo fetch logo abaixo
        var nomeVar = input_nome.value;
        var emailVar = input_email.value;
        var senhaVar = input_senha.value;
        var planta_favoritaVar = plantabd.value;


        if (nomeVar == "" || emailVar == "" || senhaVar == "" || planta_favoritaVar == "") {
            //cardErro.style.display = "block"
            swal("Ops", "Preencha todos os campos ðŸ˜ ", "error")


            //finalizarAguardar();
            return false;
        }
        else if (nomeVar.length < 2) {
            swal("Ops", "O nome inserido Ã© muito curto. Por favor, insira um nome com pelo menos 8 caracteres ðŸ˜ ", "warning")
        }
        else if ( emailVar.indexOf("@") == -1 || emailVar.indexOf(".com") == -1 || emailVar.length < 5) {
            swal("Ops", "O e-mail cadastrado Ã© invÃ¡lido. Por favor, insira um e-mail vÃ¡lido ðŸ˜ ", "warning")
        }
        else if (senhaVar.length < 2) {
            swal("Ops", "A senha inserida Ã© muito curta. Por favor,insira uma senha com pelo menos 8 caracteres ðŸ˜ ", "warning")
        }
        else {
            // Enviando o valor da nova input
            fetch("/usuarios/cadastrar", {
                method: "POST",
                headers: {
                    "Content-Type": "application/json"
                },
                body: JSON.stringify({
                    // crie um atributo que recebe o valor recuperado aqui
                    // Agora vÃ¡ para o arquivo routes/usuario.js
                    nomeServer: nomeVar,
                    emailServer: emailVar,
                    senhaServer: senhaVar,
                    plantaServer: planta_favoritaVar
                })
            }).then(function (resposta) {

                console.log("resposta: ", resposta);

                if (resposta.ok) {
                    //cardErro.style.display = "block";
                    swal("ParÃ¡bens", "Cadastro realizado com sucesso redirecionando a tela de login ðŸ˜„...!", "success");


                    setTimeout(() => {
                        window.location = "./loginbanco.html";
                    }, 3000)

                    //limparFormulario();
                    //finalizarAguardar();
                } else {
                    swal("Ops", "Mais de um usuÃ¡rio com o mesmo login e senha ðŸ˜­!")
                }
            }).catch(function (resposta) {
                console.log(`#ERRO: ${resposta}`);
                //finalizarAguardar();
            });

            return false;
        }
    }

        //function sumirMensagem() {
            //cardErro.style.display = "none"
       Â //}


</script>









<!--<script>
    function cadastrar() {
        

        //Recupere o valor da nova input pelo nome do id
        // Agora vÃ¡ para o mÃ©todo fetch logo abaixo
        var nomeVar = input_nome.value;
        var emailVar = input_email.value;
        var senhaVar = input_senha.value;
        var planta_favoritaVar = plantabd.value;

        if (nomeVar == "" || emailVar == "" || senhaVar == "" || planta_favoritaVar == "") {
            cardErro.style.display = "block"
            mensagem_erro.innerHTML = "(Mensagem de erro para todos os campos em branco)";

            finalizarAguardar();
            return false;
        }
        else {
            setInterval(sumirMensagem, 5000)
        }

        // Enviando o valor da nova input
        fetch("/usuarios/cadastrar", {
            method: "POST",
            headers: {
                "Content-Type": "application/json"
            },
            body: JSON.stringify({
                // crie um atributo que recebe o valor recuperado aqui
                // Agora vÃ¡ para o arquivo routes/usuario.js
                nomeServer: nomeVar,
                emailServer: emailVar,
                senhaServer: senhaVar,
                plantaServer: planta_favoritaVar
            })
        }).then(function (resposta) {

            console.log("resposta: ", resposta);

            if (resposta.ok) {
                
                setTimeout(() => {
                    window.location = "./loginbanco.html";
                }, "2000")

                limparFormulario();
                finalizarAguardar();
            } else {
                throw ("Houve um erro ao tentar realizar o cadastro!");
            }
        }).catch(function (resposta) {
            console.log(`#ERRO: ${resposta}`);
            finalizarAguardar();
        });

        return false;
    }

    function sumirMensagem() {
        cardErro.style.display = "none"
    }







</script>-->
<script
    src="https://desk.zoho.com/portal/api/feedbackwidget/861751000000226171?orgId=811411868&displayType=popout"></script>